<!DOCTYPE html>
<html>
<head>
	<meta charset = "UTF-8">
	<title>Apple</title>
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Banana music">
	<meta name="keywords" content="music, play, ajax, XML, JavaScript,INT107,Web tect">
	<meta name="author" content="SIT INT107">
	<link type="image/x-icon" href="src/iconapple.jpg">


</head>
<body onload = "parallax()">
	<script>
		var x,xmlhttp,xmlDoc; 
		  xmlhttp = new XMLHttpRequest(); 
		  xmlhttp.open("GET", "src/music.xml", false); 
		  xmlhttp.send(); 
		  xmlDoc = xmlhttp.responseXML;  
		  x = xmlDoc.getElementsByTagName("ARTIST"); 
		  test = ""; 
		  for (i = 0; i <x.length; i++) {  
		    test += x[i].getElementsByTagName("NAME")[0].childNodes[0].nodeValue + "\n"; 
		  } 
		  console.log(test); 
		function parallax() {
			//console.log("kaw");
			var parallax = document.getElementById("main");
			var playL = document.getElementById( 'l1' ).offsetLeft,
				playT = document.getElementById( 'l1' ).offsetTop,
				bgL = document.getElementById( 'l2' ).offsetLeft,
				bgT = document.getElementById( 'l2' ).offsetTop,
				neL = document.getElementById( 'ne' ).offsetLeft,
				neT = document.getElementById( 'ne' ).offsetTop,
				eL = document.getElementById( 'e' ).offsetLeft,
				eT = document.getElementById( 'e' ).offsetTop;
				seL = document.getElementById( 'se' ).offsetLeft,
				seT = document.getElementById( 'se' ).offsetTop,
				nwL = document.getElementById( 'nw' ).offsetLeft,
				nwT = document.getElementById( 'nw' ).offsetTop,
				wL = document.getElementById( 'w' ).offsetLeft,
				wT = document.getElementById( 'w' ).offsetTop,
				swL = document.getElementById( 'sw' ).offsetLeft,
				swT = document.getElementById( 'sw' ).offsetTop;
			//console.log(playL + "      " + playT);
			parallax.onmousemove = function ( event ) {
				//console.log("onmousemove");
				event = event || window.event;
				var x = event.clientX - parallax.offsetLeft,
					y = event.clientY - parallax.offsetTop;

				//mouseParallax( 'playbt', playL, playT, x, y, 0 );
				mouseParallax( 'bg', bgL, bgT, x, y, 0 );
				mouseParallax( 'ne', neL, neT, x, y, 2 );
				mouseParallax( 'e', eL, eT, x, y, 10 );
				mouseParallax( 'se', seL, seT, x, y, 5 );
				mouseParallax( 'nw', nwL, nwT, x, y, 2 );
				mouseParallax( 'w', wL, wT, x, y, 10 );
				mouseParallax( 'sw', swL, swT, x, y, 5 );
			}

			function mouseParallax ( id, left, top, mouseX, mouseY, speed ){
				
				//console.log("mouseParallax");
				var obj = document.getElementById(id);
				//console.log(obj);
				var parentObj = obj.parentNode,
				containerWidth = parseInt( parentObj.offsetWidth ),
				containerHeight = parseInt( parentObj.offsetHeight );
				// containerHeight=parseInt(getHeight(obj));
				// containerWidth=parseInt(getW(obj));
				containerHeight=obj.clientWidth;
				containerWidth=obj.clientHeight;
				//console.log("conW = "+containerWidth+"\nConH = "+containerHeight);
				obj.style.left = left - ( ( ( mouseX - ( parseInt( obj.offsetHeight ) / 2 + left ) ) / containerWidth ) * speed ) + 'px';
				//containerHeight = 1200;
				obj.style.top = top - ( ( ( mouseY - ( parseInt( obj.offsetHeight ) / 2 + top ) ) / containerHeight ) * speed ) + 'px';
				// obj.style.top = left - ( ( ( mouseX - ( parseInt( obj.offsetWidth ) / 2 + left ) ) / containerWidth ) * speed ) + 'px';
				//console.log(obj.style.left + "      " + obj.style.top);				
			}

			cover = [
				"bruno-24kmagic",
				"chainsmokers-memories",
				"coldplay-parachutes",
				"ed-divide",
				"katy-witness",
				"twentyonepilots-blurry"];
			random();
			function random(){		
				for (var i = 0.; i <= 5 ; i++) {
					var randomCover = Math.floor((Math.random()*5 ));
					var temp = cover[i]
					cover[i] = cover[randomCover];
					cover[randomCover] = temp;
				};
				console.log(cover);
			}
			showCover();
		}

	</script>
	<main id = "main">
		<div id="l2">
			<img id = "bg" class = "parallax" src = "src/bg5.jpg" width = "100%" >
		</div>
		//--------------------------//
		<div id="myModal" class="modal">

		  <!-- Modal content -->
			<div class="modal-content">	<span class="close">&times;</span>
		    <p style="text-align:center;">TEST</p>
		  	</div>

		</div>		
		//---------------------------//
		<div id="l1">
			<img id = "stopbt"  onclick="stopBtn()" class = "parallax" src = "src/fStop.png" width = "15%">
			<img id = "playbt"  onclick="playBtn()" class = "parallax" src = "src/fPlay.png" width = "15%">
		</div>
		<div id="s1">
			<img id = "ne" class = "cover" width = "13%" style = "visibility: hidden">
			<img id = "se" class = "cover" width = "12%" style = "visibility: hidden">
			<img id = "e" class = "cover" width = "18%" style = "visibility: hidden">
			<img id = "nw" class = "cover" width = "13%" style = "visibility: hidden">
			<img id = "sw" class = "cover" width = "12%" style = "visibility: hidden">
			<img id = "w" class = "cover" width = "18%" style = "visibility: hidden">
		</div>
	</main>
	<nav class = "navbar">
		<div class = "headbar">
			<ul>
				<span id = "banana"><li>banana</li></span>
				<span id = "icon"><li id = "icon" onclick = "headside(0)"><img src="src/banana.png"></li></span>
				<li onclick = "headside(1)" >Music</li>
				<span id = "minion"><li onclick = "test()">TEST</li></span>
				<li onclick = "headside(3)">about Us</li>
				<li onclick = "headside(4)">contact</li>	
			</ul>			
		</div>
	</nav>	
	<script>

		function test(){
			// Get the modal
			var modal = document.getElementById('myModal');

			// Get the button that opens the modal
			var btn = document.getElementById("minion");

			// Get the <span> element that closes the modal
			var span = document.getElementsByClassName("close")[0];

			// When the user clicks the button, open the modal 
			btn.onclick = function() {
			    modal.style.display = "block";
			}

			// When the user clicks on <span> (x), close the modal
			span.onclick = function() {
			    modal.style.display = "none";
			}

			// When the user clicks anywhere outside of the modal, close it
			window.onclick = function(event) {
			    if (event.target == modal) {
			        modal.style.display = "none";
			    }
			}
		}

		function showCover(){
			document.getElementById("ne").src = "cover/" + cover[0] + ".jpg";
			document.getElementById("e").src = "cover/" + cover[1] + ".jpg";
			document.getElementById("se").src = "cover/" + cover[2] + ".jpg";		
			document.getElementById("sw").src = "cover/" + cover[3] + ".jpg";
			document.getElementById("w").src = "cover/" + cover[4] + ".jpg";
			document.getElementById("nw").src = "cover/" + cover[5] + ".jpg";	
			timeShowCover();	
		}
		function timeShowCover(){
			window.setTimeout( function(){
				document.getElementById("ne").style.visibility = "visible";
				document.getElementById("ne").style.animation = "showCv 2s"; 
			} , 200 );
				document.getElementById("ne").setAttribute("onclick", "showPlayBt(0),test()");
			window.setTimeout( function(){
				document.getElementById("e").style.visibility = "visible";
				document.getElementById("e").style.animation = "showCv 2s"; 
			} , 400 );
				document.getElementById("e").setAttribute("onclick", "showPlayBt(1)");
			window.setTimeout( function(){
				document.getElementById("se").style.visibility = "visible";
				document.getElementById("se").style.animation = "showCv 2s"; 
			} , 600 );
				document.getElementById("se").setAttribute("onclick", "showPlayBt(2)");
			window.setTimeout( function(){
				document.getElementById("sw").style.visibility = "visible";
				document.getElementById("sw").style.animation = "showCv 2s"; 
			} , 800 );
				document.getElementById("sw").setAttribute("onclick", "showPlayBt(3)");
			window.setTimeout( function(){
				document.getElementById("w").style.visibility = "visible";
				document.getElementById("w").style.animation = "showCv 2s"; 
			} , 1000 );
				document.getElementById("w").setAttribute("onclick", "showPlayBt(4)");
			window.setTimeout( function(){
				document.getElementById("nw").style.visibility = "visible";
				document.getElementById("nw").style.animation = "showCv 2s"; 
			} , 1200 );
				document.getElementById("nw").setAttribute("onclick", "showPlayBt(5)");
		}
		audio = new Audio("");
		function showPlayBt(o){
			audio.pause();
			audio = new Audio("track/" + cover[o] + ".mp3");
			audio.volume= .4;
			audio.play();
			document.getElementById("l1").innerHTML = '<img id = "stopbt"  onclick="stopBtn()" class = "parallax" src = "src/fStop.png" width = "15%">'						
		}
		function playBtn(){
			audio.pause();
			var rd = Math.floor(Math.random()*5);
			audio = new Audio("track/" + cover[rd] + ".mp3");
			audio.volume= .4;
			audio.play();
			document.getElementById("l1").innerHTML = '<img id = "stopbt"  onclick="stopBtn()" class = "parallax" src = "src/fStop.png" width = "15%">'
		}
		function stopBtn(){
			audio.pause();
			document.getElementById("l1").innerHTML = '<img id = "playbt"  onclick="playBtn()" class = "parallax" src = "src/fPlay.png" width = "15%">'
			
		}
		function headside(i){
			switch(i){
				case 0:
					document.getElementById("icon").innerHTML = '<li id = "icon"><img src="src/banana4.png"></li>';
					window.setTimeout( function(){ change(0); } , 3000 );
					playSound(0);
					break;
				case 1: 
					alert("Bello!");
					break;
				case 2: 
					document.getElementById("minion").innerHTML = '<li style = "color:lightgrey" >Minion!</li>';
					window.setTimeout( function(){ change(1); } , 3000 );
					playSound(1);
					break;
				case 3: alert("59130500073\n59130500100\n59130500128\n59130500133\n59130500136\n59130500139");break;
				case 4: alert("Tanapat Choochot");break;
			}
		}
		function playSound(j){
			switch(j){
				case 0:
					var audio = new Audio('src/bababa.mp3');
					audio.volume= .3;
					audio.play();
					break;
				case 1: 
					var audio = new Audio('src/lalo.mp3');
					audio.volume= .1;
					audio.play();
					break;
				}
		}
		function change(i){
			switch(i){
				case 0:
					document.getElementById("icon").innerHTML = '<li id = "icon" onMouseOver = "headside(0)"><img src="src/banana.png"></li>';
					break;
				case 1:
					document.getElementById("minion").innerHTML = '<li onMouseOver = "headside(2)" >Minion!</li>';
					break;
			}
		}
	</script>
</body>
</html>